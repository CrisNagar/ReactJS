{"ast":null,"code":"class Movements {\n  constructor() {\n    this.PAWN_OFFSETS = {\n      BLACK: [-15, -16, -17, -32],\n      WHITE: [15, 16, 17, 32]\n    };\n    this.PIECE_OFFSETS = {\n      N: [-18, -33, -31, -14, 18, 33, 31, 14],\n      B: [-17, -15, 17, 15],\n      R: [1, 2, 3, 4, 5, 6, 7, 16, 32, 48, 64, 80, 96, -1, -2, -3, -4, -5, -6, -7, -16, -32, -48, -64, -80, -96],\n      Q: [-17, -16, -15, 1, 17, 16, 15, -1],\n      K: [-17, -16, -15, 1, 17, 16, 15, -1]\n    };\n    this.SQUARES = {\n      A8: 0,\n      B8: 1,\n      C8: 2,\n      D8: 3,\n      E8: 4,\n      F8: 5,\n      G8: 6,\n      H8: 7,\n      A7: 16,\n      B7: 17,\n      C7: 18,\n      D7: 19,\n      E7: 20,\n      F7: 21,\n      G7: 22,\n      H7: 23,\n      A6: 32,\n      B6: 33,\n      C6: 34,\n      D6: 35,\n      E6: 36,\n      F6: 37,\n      G6: 38,\n      H6: 39,\n      A5: 48,\n      B5: 49,\n      C5: 50,\n      D5: 51,\n      E5: 52,\n      F5: 53,\n      G5: 54,\n      H5: 55,\n      A4: 64,\n      B4: 65,\n      C4: 66,\n      D4: 67,\n      E4: 68,\n      F4: 69,\n      G4: 70,\n      H4: 71,\n      A3: 80,\n      B3: 81,\n      C3: 82,\n      D3: 83,\n      E3: 84,\n      F3: 85,\n      G3: 86,\n      H3: 87,\n      A2: 96,\n      B2: 97,\n      C2: 98,\n      D2: 99,\n      E2: 100,\n      F2: 101,\n      G2: 102,\n      H2: 103,\n      A1: 112,\n      B1: 113,\n      C1: 114,\n      D1: 115,\n      E1: 116,\n      F1: 117,\n      G1: 118,\n      H1: 119\n    };\n  }\n\n  /* \r\n    COMPROBAMOS QUE EL MOVIMIENTO QUE SE INTENTA ES VALIDO\r\n    PARAMETROS:\r\n    -JUGADOR ACTUAL\r\n    -TIPO DE FICHA\r\n    -CASILLA INICIAL\r\n    -CASILLA FINAL\r\n    */\n  checkMovement(player, piece, from, to) {\n    const offset = this.SQUARES[from] - this.SQUARES[to];\n\n    switch (piece) {\n      case \"P\":\n        const pawnFrom = document.querySelector(`button[data-position=\"${from}\"]`).firstElementChild;\n        const pawnTo = document.querySelector(`button[data-position=\"${to}\"]`).firstElementChild;\n\n        for (let i = 0; i < this.PAWN_OFFSETS[player].length; i++) {\n          if (offset === this.PAWN_OFFSETS[player][i]) {\n            if (offset === 15 || offset === -15 || offset === 17 || offset === -17) {\n              if (pawnFrom && pawnTo) {\n                if (pawnFrom.dataset.player === pawnTo.dataset.player) {\n                  return false;\n                } else {\n                  this.checkAtack(pawnFrom, pawnTo);\n                }\n              }\n\n              return pawnTo ? true : false;\n            }\n\n            if (offset === 16 || offset === -16 || offset === 32 || offset === -32) {\n              if ((offset === 32 || offset === -32) && pawnFrom.dataset.start === 'false') {\n                return false;\n              }\n\n              if ((offset === 32 || offset === -32) && pawnFrom.dataset.start) {\n                const positionOffset = offset > 0 ? this.SQUARES[to] + 16 : this.SQUARES[to] - 16;\n                const position = Object.keys(this.SQUARES).find(key => this.SQUARES[key] === positionOffset);\n                pawnFrom.dataset.start = false;\n                return document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild ? false : true;\n              }\n\n              return pawnTo ? false : true;\n            }\n\n            return false;\n          }\n        }\n\n        break;\n\n      case \"R\":\n        const rookFrom = document.querySelector(`button[data-position=\"${from}\"]`).firstElementChild;\n        const rookTo = document.querySelector(`button[data-position=\"${to}\"]`).firstElementChild;\n\n        for (let i = 0; i < this.PIECE_OFFSETS[piece].length; i++) {\n          if (offset === this.PIECE_OFFSETS[piece][i]) {\n            if (offset === 1 || offset === 2 || offset === 3 || offset === 4 || offset === 5 || offset === 6 || offset === 7) {\n              const position = Object.keys(this.SQUARES).find(key => this.SQUARES[key] === this.SQUARES[to]);\n            }\n\n            if (offset === 16 || offset === 32 || offset === 48 || offset === 64 || offset === 80 || offset === 96 || offset === -16 || offset === -32 || offset === -48 || offset === -64 || offset === -80 || offset === -96) {\n              const finalPosition = Object.keys(this.SQUARES).find(key => this.SQUARES[key] === this.SQUARES[to]);\n\n              for (let i = 1; i <= 8; i++) {\n                const positionOffset = offset > 0 ? this.SQUARES[to] + 16 * i : this.SQUARES[to] - 16 * i;\n                const position = Object.keys(this.SQUARES).find(key => this.SQUARES[key] === positionOffset);\n                if (!position) continue;\n\n                if (position !== from) {\n                  if (position !== finalPosition && document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild) {\n                    console.log('AQUI HAY UNA FICHA!!!! -> ' + position);\n                    return false;\n                  }\n\n                  if (position === finalPosition && document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild) {\n                    if (rookFrom.dataset.player === rookTo.dataset.player) {\n                      return false;\n                    } else {\n                      console.log('Me estoy comiento una ficha!!! -> ' + position);\n                      this.checkAtack(rookFrom, rookTo);\n                    }\n                  }\n\n                  console.log(document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild);\n\n                  if (position === finalPosition && !document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild) {\n                    console.log('AQUI NO HAY NADA');\n                    return true;\n                  }\n                }\n              }\n            }\n\n            return false;\n          }\n        }\n\n        break;\n\n      case \"N\":\n      case \"B\":\n      case \"Q\":\n      case \"K\":\n      default:\n        return false;\n    }\n  }\n\n  checkAtack(attacker, attacked) {\n    if (attacker.dataset.player !== attacked.dataset.player) {\n      const list = document.querySelector(`#${attacked.dataset.player.toLowerCase()}-kills`);\n      const li = document.createElement('li');\n      li.appendChild(attacked);\n      li.setAttribute('class', `list-group-item ${attacked.dataset.player === 'WHITE' ? 'bg-dark' : 'bg-light'}`);\n      list.appendChild(li);\n      console.log(\"Atacando al enemigo!\");\n    }\n  }\n  /*****************************************************************************\r\n   * UTILITY FUNCTIONS\r\n   ****************************************************************************/\n\n\n  rank(i) {\n    return i >> 4;\n  }\n\n}\n\nexport default Movements;","map":{"version":3,"sources":["C:/xampp/htdocs/React/chess/src/library/Movements.js"],"names":["Movements","PAWN_OFFSETS","BLACK","WHITE","PIECE_OFFSETS","N","B","R","Q","K","SQUARES","A8","B8","C8","D8","E8","F8","G8","H8","A7","B7","C7","D7","E7","F7","G7","H7","A6","B6","C6","D6","E6","F6","G6","H6","A5","B5","C5","D5","E5","F5","G5","H5","A4","B4","C4","D4","E4","F4","G4","H4","A3","B3","C3","D3","E3","F3","G3","H3","A2","B2","C2","D2","E2","F2","G2","H2","A1","B1","C1","D1","E1","F1","G1","H1","checkMovement","player","piece","from","to","offset","pawnFrom","document","querySelector","firstElementChild","pawnTo","i","length","dataset","checkAtack","start","positionOffset","position","Object","keys","find","key","rookFrom","rookTo","finalPosition","console","log","attacker","attacked","list","toLowerCase","li","createElement","appendChild","setAttribute","rank"],"mappings":"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","sourcesContent":["class Movements {\r\n    PAWN_OFFSETS = {\r\n        BLACK: [-15, -16, -17, -32],\r\n        WHITE: [15, 16, 17, 32]\r\n    }\r\n\r\n    PIECE_OFFSETS = {\r\n        N: [-18, -33, -31, -14, 18, 33, 31, 14],\r\n        B: [-17, -15, 17, 15],\r\n        R: [1, 2, 3, 4, 5, 6, 7, 16, 32, 48, 64, 80, 96, -1, -2, -3, -4, -5, -6, -7, -16, -32, -48, -64, -80, -96,],\r\n        Q: [-17, -16, -15, 1, 17, 16, 15, -1],\r\n        K: [-17, -16, -15, 1, 17, 16, 15, -1]\r\n    }\r\n\r\n    SQUARES = {\r\n        A8: 0, B8: 1, C8: 2, D8: 3, E8: 4, F8: 5, G8: 6, H8: 7,\r\n        A7: 16, B7: 17, C7: 18, D7: 19, E7: 20, F7: 21, G7: 22, H7: 23,\r\n        A6: 32, B6: 33, C6: 34, D6: 35, E6: 36, F6: 37, G6: 38, H6: 39,\r\n        A5: 48, B5: 49, C5: 50, D5: 51, E5: 52, F5: 53, G5: 54, H5: 55,\r\n        A4: 64, B4: 65, C4: 66, D4: 67, E4: 68, F4: 69, G4: 70, H4: 71,\r\n        A3: 80, B3: 81, C3: 82, D3: 83, E3: 84, F3: 85, G3: 86, H3: 87,\r\n        A2: 96, B2: 97, C2: 98, D2: 99, E2: 100, F2: 101, G2: 102, H2: 103,\r\n        A1: 112, B1: 113, C1: 114, D1: 115, E1: 116, F1: 117, G1: 118, H1: 119\r\n    }\r\n\r\n    /* \r\n      COMPROBAMOS QUE EL MOVIMIENTO QUE SE INTENTA ES VALIDO\r\n      PARAMETROS:\r\n      -JUGADOR ACTUAL\r\n      -TIPO DE FICHA\r\n      -CASILLA INICIAL\r\n      -CASILLA FINAL\r\n      */\r\n    checkMovement(player, piece, from, to) {\r\n        const offset = this.SQUARES[from] - this.SQUARES[to]\r\n\r\n        switch (piece) {\r\n            case \"P\":\r\n                const pawnFrom = document.querySelector(`button[data-position=\"${from}\"]`).firstElementChild\r\n                const pawnTo = document.querySelector(`button[data-position=\"${to}\"]`).firstElementChild\r\n\r\n                for (let i = 0; i < this.PAWN_OFFSETS[player].length; i++) {\r\n                    if (offset === this.PAWN_OFFSETS[player][i]) {\r\n                        if (offset === 15 || offset === -15 || offset === 17 || offset === -17) {\r\n                            if (pawnFrom && pawnTo) {\r\n                                if (pawnFrom.dataset.player === pawnTo.dataset.player) {\r\n                                    return false\r\n                                } else {\r\n                                    this.checkAtack(pawnFrom, pawnTo)\r\n                                }\r\n                            }\r\n\r\n                            return pawnTo ? true : false\r\n                        }\r\n\r\n                        if (offset === 16 || offset === -16 || offset === 32 || offset === -32) {\r\n                            if ((offset === 32 || offset === -32) && pawnFrom.dataset.start === 'false') {\r\n                                return false\r\n                            }\r\n\r\n                            if ((offset === 32 || offset === -32) && pawnFrom.dataset.start) {\r\n                                const positionOffset = offset > 0 ? this.SQUARES[to] + 16 : this.SQUARES[to] - 16\r\n                                const position = Object.keys(this.SQUARES).find((key) => this.SQUARES[key] === positionOffset)\r\n                                pawnFrom.dataset.start = false\r\n                                return document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild ? false : true\r\n                            }\r\n\r\n                            return pawnTo ? false : true\r\n                        }\r\n\r\n                        return false\r\n                    }\r\n                }\r\n                break\r\n            case \"R\":\r\n                const rookFrom = document.querySelector(`button[data-position=\"${from}\"]`).firstElementChild\r\n                const rookTo = document.querySelector(`button[data-position=\"${to}\"]`).firstElementChild\r\n\r\n                for (let i = 0; i < this.PIECE_OFFSETS[piece].length; i++) {\r\n                    if (offset === this.PIECE_OFFSETS[piece][i]) {\r\n                        if (offset === 1 || offset === 2 || offset === 3 || offset === 4 || offset === 5 || offset === 6 || offset === 7) {\r\n                            const position = Object.keys(this.SQUARES).find((key) => this.SQUARES[key] === this.SQUARES[to])\r\n                        }\r\n\r\n                        if (offset === 16 || offset === 32 || offset === 48 || offset === 64 || offset === 80 || offset === 96 || offset === -16 || offset === -32 || offset === -48 || offset === -64 || offset === -80 || offset === -96) {\r\n                            const finalPosition = Object.keys(this.SQUARES).find((key) => this.SQUARES[key] === this.SQUARES[to])\r\n\r\n                            for (let i = 1; i <= 8; i++) {\r\n                                const positionOffset = offset > 0 ? this.SQUARES[to] + (16 * i) : this.SQUARES[to] - (16 * i)\r\n                                const position = Object.keys(this.SQUARES).find((key) => this.SQUARES[key] === positionOffset)\r\n\r\n                                if (!position) continue\r\n\r\n                                if (position !== from) {\r\n\r\n                                    if (position !== finalPosition && document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild) {\r\n                                        console.log('AQUI HAY UNA FICHA!!!! -> ' + position)\r\n                                        return false\r\n                                    }\r\n\r\n                                    if (position === finalPosition && document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild) {\r\n                                        if (rookFrom.dataset.player === rookTo.dataset.player) {\r\n                                            return false\r\n                                        } else {\r\n                                            console.log('Me estoy comiento una ficha!!! -> ' + position)\r\n                                            this.checkAtack(rookFrom, rookTo)\r\n                                        }\r\n                                    }\r\n                                    console.log(document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild);\r\n                                    if (position === finalPosition && !document.querySelector(`button[data-position=\"${position}\"]`).firstElementChild) {\r\n                                        console.log('AQUI NO HAY NADA')\r\n                                        return true\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        return false\r\n                    }\r\n                }\r\n                break\r\n            case \"N\":\r\n            case \"B\":\r\n            case \"Q\":\r\n            case \"K\":\r\n            default: return false;\r\n        }\r\n    }\r\n\r\n    checkAtack(attacker, attacked) {\r\n        if (attacker.dataset.player !== attacked.dataset.player) {\r\n            const list = document.querySelector(`#${attacked.dataset.player.toLowerCase()}-kills`)\r\n            const li = document.createElement('li')\r\n            li.appendChild(attacked)\r\n            li.setAttribute('class', `list-group-item ${attacked.dataset.player === 'WHITE' ? 'bg-dark' : 'bg-light'}`)\r\n\r\n            list.appendChild(li)\r\n            console.log(\"Atacando al enemigo!\")\r\n        }\r\n\r\n    }\r\n\r\n    /*****************************************************************************\r\n     * UTILITY FUNCTIONS\r\n     ****************************************************************************/\r\n    rank(i) {\r\n        return i >> 4;\r\n    }\r\n}\r\n\r\nexport default Movements"]},"metadata":{},"sourceType":"module"}